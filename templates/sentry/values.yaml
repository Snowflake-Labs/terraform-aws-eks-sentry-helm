prefix: "${module_prefix}"

user:
  create: true
  email: "${sentry_email}"
  password: "${sentry_password}"

# serviceAccount:
#   annotations: { eks.amazonaws.com/role-arn: "${eks_service_account_role_arn}" }
#   enabled: true
#   name: "sentry"
#   automountServiceAccountToken: true

# system:
#   url: "https://${sentry_dns_name}"
#   public: true

# service:
#   name: sentry
#   type: ClusterIP
#   externalPort: 9000
#   annotations:
#     # service.beta.kubernetes.io/aws-load-balancer-ssl-negotiation-policy: "ELBSecurityPolicy-TLS-1-2-2017-01"
#     # service.beta.kubernetes.io/aws-load-balancer-ssl-cert: "${lb_cert}"
#     service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "http"
#     service.beta.kubernetes.io/aws-load-balancer-backend-port: "9000"
#     service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443,8443"
#   loadBalancerSourceRanges: "${allowed_cidr_blocks}"

# nginx:
#   enabled: false

ingress:
  enabled: true
  hostname: "${sentry_dns_name}"
  # regexPathStyle: "aws-alb"
  # alb:
  #   httpRedirect: true
  annotations:
    kubernetes.io/ingress.class: "alb"
    alb.ingress.kubernetes.io/scheme: "internet-facing"
    alb.ingress.kubernetes.io/target-type: "instance"
    external-dns.alpha.kubernetes.io/hostname: "${sentry_dns_name}"
    alb.ingress.kubernetes.io/certificate-arn: ${subdomain_cert_arn}
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 443}]'
# externalRedis = {
#   host = local.tfstate["redis"]["host"]
# }

# externalPostgresql = {
#   host     = module.db.connection_secret["values"]["host"]
#   database = module.db.connection_secret["values"]["name"]
#   username = module.db.connection_secret["values"]["username"]
#   password = module.db.connection_secret["values"]["password"]
# }

# mail = {
#   backend  = "smtp"
#   useTls   = true
#   from     = local.email
#   host     = local.stack_vars["ses"]["host"]
#   port     = local.stack_vars["ses"]["port"]
#   username = module.smtp_user.credentials["values"]["access_key_id"]
#   password = module.smtp_user.credentials["values"]["password"]
# }

# serviceAccount = {
#   enabled     = true
#   annotations = { "eks.amazonaws.com/role-arn" = module.svc_account_iam_role.arn }
# }
